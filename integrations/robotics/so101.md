# SO-101 Robot Arm Integration

> **Affordable, open-source robot arm for AI research**

---

## Overview

| Aspect | Details |
|--------|---------|
| **What** | Low-cost 6-DOF robot arm |
| **Why** | Accessible hardware for learning robotics |
| **Price** | ~$500 DIY / ~$1000 assembled |
| **Best For** | Imitation learning, manipulation research |

### SO-101 Specifications

| Spec | Value |
|------|-------|
| DOF | 6 (5 arm + gripper) |
| Reach | ~300mm |
| Payload | ~250g |
| Motors | Dynamixel or Feetech servos |
| Control | Serial/USB |

---

## Prerequisites

| Requirement | Details |
|-------------|---------|
| **Hardware** | SO-101 arm (built or kit) |
| **Computer** | Linux recommended |
| **USB** | Serial connection to arm |

---

## Quick Start (2 hours)

### Installation

```bash
# Clone LeRobot (includes SO-101 support)
git clone https://github.com/huggingface/lerobot
cd lerobot
pip install -e .

# Install servo libraries
pip install dynamixel-sdk  # For Dynamixel servos
# OR
pip install feetech-servo-sdk  # For Feetech servos
```

### Basic Control

```python
from lerobot.common.robot_devices.robots.factory import make_robot

# Initialize robot
robot = make_robot(
    robot_type="so100",
    robot_config={
        "port": "/dev/ttyUSB0",
        "baudrate": 1000000
    }
)

# Connect
robot.connect()

# Read current position
state = robot.capture_observation()
print(f"Joint positions: {state['observation.state']}")

# Move to position
robot.send_action({
    "action": [0.0, -0.5, 0.5, 0.0, 0.0, 0.5]  # 6 joint angles in radians
})

# Disconnect
robot.disconnect()
```

---

## Learning Path

### L0: Hardware Setup (2-4 hours)
- [ ] Assemble or receive arm
- [ ] Connect to computer
- [ ] Test servo communication
- [ ] Calibrate joints

### L1: Teleoperation (4-6 hours)
- [ ] Leader-follower setup
- [ ] Record demonstrations
- [ ] Replay trajectories
- [ ] Data collection

### L2: AI Training (1-2 days)
- [ ] Collect task dataset
- [ ] Train policy with LeRobot
- [ ] Deploy to robot
- [ ] Iterate and improve

---

## Code Examples

### Servo Calibration

```python
from lerobot.common.robot_devices.robots.so100 import SO100Robot

robot = SO100Robot(
    port="/dev/ttyUSB0",
    baudrate=1000000
)

robot.connect()

# Read servo IDs and positions
for servo_id in range(1, 7):
    position = robot.read_servo_position(servo_id)
    print(f"Servo {servo_id}: {position}")

# Set home position
robot.go_to_home()

# Calibrate (follow prompts)
robot.calibrate()
```

### Teleoperation Setup

```python
from lerobot.common.robot_devices.robots.factory import make_robot
from lerobot.common.robot_devices.control_configs import TeleoperationConfig

# Leader (your movements)
leader = make_robot(
    robot_type="so100",
    robot_config={"port": "/dev/ttyUSB0"}
)

# Follower (mimics leader)
follower = make_robot(
    robot_type="so100",
    robot_config={"port": "/dev/ttyUSB1"}
)

leader.connect()
follower.connect()

# Teleoperate
config = TeleoperationConfig(
    leader=leader,
    follower=follower,
    control_frequency=50  # Hz
)

try:
    while True:
        # Read leader position
        leader_state = leader.capture_observation()

        # Command follower to match
        follower.send_action({"action": leader_state["observation.state"]})

except KeyboardInterrupt:
    leader.disconnect()
    follower.disconnect()
```

### Data Collection

```python
from lerobot.common.datasets.lerobot_dataset import LeRobotDataset
from lerobot.common.robot_devices.robots.factory import make_robot
import time

# Setup
robot = make_robot(robot_type="so100", robot_config={"port": "/dev/ttyUSB0"})
robot.connect()

# Create dataset
dataset = LeRobotDataset.create(
    repo_id="my-username/so100-pick-place",
    robot_type="so100"
)

# Record episode
episode_data = []
print("Recording... Press Ctrl+C to stop")

try:
    while True:
        observation = robot.capture_observation()
        episode_data.append({
            "observation.state": observation["observation.state"],
            "observation.image": observation.get("observation.image"),
            "action": observation["observation.state"],  # In teleop, action = next state
            "timestamp": time.time()
        })
        time.sleep(0.02)  # 50 Hz

except KeyboardInterrupt:
    # Save episode
    dataset.add_episode(episode_data)
    dataset.save()
    print(f"Saved episode with {len(episode_data)} frames")

robot.disconnect()
```

### Training with LeRobot

```python
# train.py
from lerobot.common.policies.act.configuration_act import ACTConfig
from lerobot.common.policies.act.modeling_act import ACTPolicy
from lerobot.common.datasets.lerobot_dataset import LeRobotDataset
from lerobot.scripts.train import train

# Load dataset
dataset = LeRobotDataset("my-username/so100-pick-place")

# Configure policy
policy_config = ACTConfig(
    input_shapes={
        "observation.state": [6],
        "observation.image": [3, 480, 640]
    },
    output_shapes={
        "action": [6]
    },
    hidden_dim=512,
    n_action_steps=100,
    chunk_size=100
)

# Train
train(
    dataset=dataset,
    policy_config=policy_config,
    output_dir="./outputs/so100-policy",
    num_epochs=100,
    batch_size=8,
    learning_rate=1e-4
)
```

### Deploy Trained Policy

```python
from lerobot.common.policies.act.modeling_act import ACTPolicy
from lerobot.common.robot_devices.robots.factory import make_robot
import torch

# Load policy
policy = ACTPolicy.from_pretrained("./outputs/so100-policy")
policy.eval()

# Connect robot
robot = make_robot(robot_type="so100", robot_config={"port": "/dev/ttyUSB0"})
robot.connect()

# Run policy
try:
    while True:
        # Get observation
        obs = robot.capture_observation()

        # Prepare input
        state = torch.tensor(obs["observation.state"]).unsqueeze(0)

        # Get action from policy
        with torch.no_grad():
            action = policy.select_action({"observation.state": state})

        # Execute action
        robot.send_action({"action": action.squeeze().numpy()})

except KeyboardInterrupt:
    robot.disconnect()
```

### Camera Integration

```python
import cv2
from lerobot.common.robot_devices.cameras.opencv import OpenCVCamera

# Setup camera
camera = OpenCVCamera(
    camera_index=0,
    fps=30,
    width=640,
    height=480
)

camera.connect()

# Capture with robot
robot = make_robot(robot_type="so100", robot_config={"port": "/dev/ttyUSB0"})
robot.connect()

try:
    while True:
        # Get robot state
        robot_obs = robot.capture_observation()

        # Get camera image
        image = camera.capture()

        # Combined observation
        full_obs = {
            "observation.state": robot_obs["observation.state"],
            "observation.image": image
        }

        # Display
        cv2.imshow("Camera", image)
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

finally:
    camera.disconnect()
    robot.disconnect()
    cv2.destroyAllWindows()
```

---

## Troubleshooting

| Problem | Solution |
|---------|----------|
| Servo not responding | Check wiring, power, baud rate |
| Jerky motion | Lower speed, check PID tuning |
| USB not found | Check permissions, try different port |
| Overheating | Reduce duty cycle, add cooling |

---

## Resources

- [SO-100/101 GitHub](https://github.com/TheRobotStudio/SO-ARM100)
- [LeRobot](https://github.com/huggingface/lerobot)
- [Dynamixel SDK](https://emanual.robotis.com/docs/en/software/dynamixel/dynamixel_sdk/)
- [Building Guide](https://huggingface.co/lerobot)

---

*Part of [Luno-AI](../../README.md) | Robotics Track*
